<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√†nh t·ª±u - Maxion</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../header.css">
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="navbar" id="navbar">
            <a href="../index.html" class="navbar-brand">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTQwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8dGV4dCB4PSIyMCIgeT0iMjgiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiMzNDk4ZGIiPk1heGlvbjwvdGV4dD4KPC9zdmc+"
                    alt="Maxion Logo">
            </a>

            <nav id="navMenu">
                <ul class="navbar-nav">
                    <li><a href="../index.html" class="navbar-link">Trang ch·ªß</a></li>
                    <li><a href="../index.html#movies" class="navbar-link">Danh s√°ch phim</a></li>
                    <li><a href="#" class="navbar-link indicator active">Th√†nh t·ª±u</a></li>
                    <li><a href="../genres/genres.html" class="navbar-link">Th·ªÉ lo·∫°i</a></li>
                    <li><a href="../index.html#live" class="navbar-link">TV Tr·ª±c ti·∫øp</a></li>
                </ul>
            </nav>

            <div class="navbar-actions">
                <form class="navbar-form">
                    <input type="text" name="search" placeholder="T√¨m ki·∫øm th√†nh t·ª±u..." class="navbar-form-search">
                    <button type="button" class="navbar-form-btn">
                        <span style="font-size: 18px;">üîç</span>
                    </button>
                </form>

                <!-- Sign In Button (shown when NOT logged in) -->
                <a href="../login_register/login.html" class="navbar-signin" id="signInBtn">
                    <span>ƒêƒÉng nh·∫≠p</span>
                    <span style="margin-left: 8px;">‚û°Ô∏è</span>
                </a>

                <!-- User Menu (shown when logged in) -->
                <div class="user-menu" id="userMenu" style="display: none;">
                    <div class="user-info-display" id="userInfoDisplay">
                        <img src="" alt="User Avatar" class="user-avatar" id="userAvatar">
                        <span class="user-name" id="displayUserName">Ng∆∞·ªùi d√πng</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-item" onclick="viewProfile()">
                            <span>üë§</span> H·ªì s∆° c·ªßa t√¥i
                        </div>
                        <div class="dropdown-item" onclick="viewBookmarks()">
                            <span>‚ù§Ô∏è</span> Danh s√°ch y√™u th√≠ch
                        </div>
                        <div class="dropdown-item" onclick="viewHistory()">
                            <span>‚è∞</span> L·ªãch s·ª≠ xem
                        </div>
                        <div class="dropdown-item" onclick="logout()">
                            <span>üö™</span> ƒêƒÉng xu·∫•t
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <main>
            <!-- Achievement Stats -->
            <section class="achievement-stats">
                <div class="stats-card">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-info">
                        <h3 id="completedCount">0</h3>
                        <p>Th√†nh t·ª±u ƒë√£ ƒë·∫°t</p>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-info">
                        <h3 id="totalCount">0</h3>
                        <p>T·ªïng th√†nh t·ª±u</p>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <h3 id="progressPercent">0%</h3>
                        <p>T·ª∑ l·ªá ho√†n th√†nh</p>
                    </div>
                </div>
            </section>

            <!-- Filter Tabs -->
            <section class="filter-tabs">
                <button class="tab-btn active" data-filter="all">T·∫•t c·∫£</button>
                <button class="tab-btn" data-filter="completed">ƒê√£ ho√†n th√†nh</button>
                <button class="tab-btn" data-filter="in-progress">ƒêang th·ª±c hi·ªán</button>
                <button class="tab-btn" data-filter="locked">Ch∆∞a b·∫Øt ƒë·∫ßu</button>
            </section>

            <!-- Achievements Grid -->
            <section class="achievements-section">
                <h2 class="section-heading">Th√†nh t·ª±u c·ªßa b·∫°n</h2>
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- Achievements will be loaded here -->
                </div>
            </section>

            <!-- Achievement Detail Modal -->
            <div class="modal" id="achievementModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modalTitle">Th√†nh t·ª±u</h3>
                        <button class="modal-close" onclick="closeModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="achievement-detail">
                            <div class="detail-icon" id="modalIcon">üèÜ</div>
                            <div class="detail-info">
                                <h4 id="modalName">T√™n th√†nh t·ª±u</h4>
                                <p id="modalDescription">M√¥ t·∫£ th√†nh t·ª±u</p>
                                <div class="detail-progress">
                                    <div class="progress-bar-large">
                                        <div class="progress-large" id="modalProgress"></div>
                                    </div>
                                    <span id="modalProgressText">0/0</span>
                                </div>
                                <div class="detail-status" id="modalStatus"></div>
                            </div>
                        </div>
                        <div class="achievement-tips" id="modalTips">
                            <h5>üí° M·∫πo ƒë·ªÉ ƒë·∫°t th√†nh t·ª±u:</h5>
                            <ul id="tipsList"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="../js/achievements.js"></script>
    <script src="./script.js"></script>

    <!-- Header Login Check -->
    <script>
        function updateHeaderLoginStatus() {
            const token = localStorage.getItem('token');
            const username = localStorage.getItem('username');
            const signInBtn = document.getElementById('signInBtn');
            const userMenu = document.getElementById('userMenu');
            const displayUserName = document.getElementById('displayUserName');

            if (token && username) {
                signInBtn.style.display = 'none';
                userMenu.style.display = 'flex';
                displayUserName.textContent = username;
            } else {
                signInBtn.style.display = 'flex';
                userMenu.style.display = 'none';
            }
        }

        function viewProfile() {
            window.location.href = '../user/user.html';
        }

        function viewBookmarks() {
            alert('T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn!');
        }

        function viewHistory() {
            alert('T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn!');
        }

        function logout() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
                localStorage.clear();
                updateHeaderLoginStatus();
                alert('ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng!');
                window.location.href = '../index.html';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            updateHeaderLoginStatus();
        });
    </script>
</body>

</html>