<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phim H√†nh ƒê·ªông - Maxion</title>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo">Maxion</a>
            
            <nav>
                <ul class="nav-menu">
                    <li><a href="../index.html" class="nav-link">Trang ch·ªß</a></li>
                    <li><a href="../movie detail/movie_detail.html" class="nav-link">Danh s√°ch phim</a></li>
                    <li><a href="#" class="nav-link active">Th·ªÉ lo·∫°i</a></li>
                    <li><a href="#" class="nav-link">TV Tr·ª±c ti·∫øp</a></li>
                    <li><a href="../user/user.html" class="nav-link">H·ªì s∆°</a></li>
                </ul>
            </nav>

            <div class="header-actions">
                <input type="search" class="search-box" placeholder="T√¨m ki·∫øm phim..." id="searchBox">
                <button class="user-btn" onclick="openProfile()">üë§ T√†i kho·∫£n</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Category Hero -->
        <section class="category-hero action" id="categoryHero">
            <div class="hero-content">
                <h1 class="hero-title" id="categoryTitle">H√†nh ƒê·ªông</h1>
                <p class="hero-subtitle" id="categorySubtitle">Nh·ªØng b·ªô phim ƒë·∫ßy k·ªãch t√≠nh v√† h·∫•p d·∫´n nh·∫•t</p>
                
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="totalMovies">120</span>
                        <span class="stat-label">Phim</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="avgRating">8.2</span>
                        <span class="stat-label">ƒêi·ªÉm TB</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="newMovies">12</span>
                        <span class="stat-label">M·ªõi</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Breadcrumb -->
        <nav class="breadcrumb">
            <ul class="breadcrumb-list">
                <li class="breadcrumb-item"><a href="#">Trang ch·ªß</a></li>
                <li class="breadcrumb-separator">‚Ä∫</li>
                <li class="breadcrumb-item"><a href="#">Th·ªÉ lo·∫°i</a></li>
                <li class="breadcrumb-separator">‚Ä∫</li>
                <li class="breadcrumb-item active" id="breadcrumbCategory">H√†nh ƒë·ªông</li>
            </ul>
        </nav>

        <!-- Content Container -->
        <div class="content-container">
            <!-- Main Content -->
            <section class="content-main">
                <!-- Filter Bar -->
                <div class="filter-bar">
                    <div class="filter-left">
                        <div class="filter-group">
                            <label class="filter-label">NƒÉm</label>
                            <select class="filter-select" id="yearFilter">
                                <option value="all">T·∫•t c·∫£</option>
                                <option value="2024">2024</option>
                                <option value="2023">2023</option>
                                <option value="2022">2022</option>
                                <option value="2021">2021</option>
                                <option value="2020">2020</option>
                                <option value="2010s">2010-2019</option>
                                <option value="2000s">2000-2009</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label">ƒê√°nh gi√°</label>
                            <select class="filter-select" id="ratingFilter">
                                <option value="all">T·∫•t c·∫£</option>
                                <option value="9+">9.0+ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
                                <option value="8+">8.0+ ‚≠ê‚≠ê‚≠ê‚≠ê</option>
                                <option value="7+">7.0+ ‚≠ê‚≠ê‚≠ê</option>
                                <option value="6+">6.0+ ‚≠ê‚≠ê</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label">S·∫Øp x·∫øp</label>
                            <div class="sort-options">
                                <button class="sort-option active" data-sort="popular">Ph·ªï bi·∫øn</button>
                                <button class="sort-option" data-sort="newest">M·ªõi nh·∫•t</button>
                                <button class="sort-option" data-sort="rating">ƒê√°nh gi√°</button>
                                <button class="sort-option" data-sort="name">T√™n A-Z</button>
                            </div>
                        </div>
                    </div>

                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid" title="L∆∞·ªõi">‚äû</button>
                        <button class="view-btn" data-view="list" title="Danh s√°ch">‚ò∞</button>
                    </div>
                </div>

                <!-- Results Header -->
                <div class="results-header">
                    <div class="results-info">
                        Hi·ªÉn th·ªã <span class="results-count" id="resultsCount">120</span> phim h√†nh ƒë·ªông
                    </div>
                </div>

                <!-- Movies Grid -->
                <div class="movies-grid" id="moviesGrid">
                    <!-- Movies will be populated by JavaScript -->
                </div>

                <!-- Load More Button -->
                <button class="load-more" id="loadMoreBtn" onclick="loadMoreMovies()">
                    T·∫£i th√™m phim
                </button>

                <!-- Pagination -->
                <nav class="pagination" id="pagination">
                    <button class="pagination-btn" data-page="prev">‚Äπ</button>
                    <button class="pagination-btn active" data-page="1">1</button>
                    <button class="pagination-btn" data-page="2">2</button>
                    <button class="pagination-btn" data-page="3">3</button>
                    <button class="pagination-btn" data-page="4">4</button>
                    <button class="pagination-btn" data-page="5">5</button>
                    <button class="pagination-btn" data-page="next">‚Ä∫</button>
                </nav>
            </section>

            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Categories -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Th·ªÉ lo·∫°i kh√°c</h3>
                    <div class="categories-list">
                        <a href="#" class="category-item active" onclick="changeCategory('action')">
                            <div class="category-name">
                                <span class="category-icon">üí•</span>
                                <span>H√†nh ƒë·ªông</span>
                            </div>
                            <span class="category-count">120</span>
                        </a>
                        <a href="#" class="category-item" onclick="changeCategory('comedy')">
                            <div class="category-name">
                                <span class="category-icon">üòÇ</span>
                                <span>H√†i</span>
                            </div>
                            <span class="category-count">85</span>
                        </a>
                        <a href="#" class="category-item" onclick="changeCategory('thriller')">
                            <div class="category-name">
                                <span class="category-icon">üò±</span>
                                <span>Thriller</span>
                            </div>
                            <span class="category-count">45</span>
                        </a>
                        <a href="#" class="category-item" onclick="changeCategory('horror')">
                            <div class="category-name">
                                <span class="category-icon">üëª</span>
                                <span>Kinh d·ªã</span>
                            </div>
                            <span class="category-count">60</span>
                        </a>
                        <a href="#" class="category-item" onclick="changeCategory('adventure')">
                            <div class="category-name">
                                <span class="category-icon">üó∫Ô∏è</span>
                                <span>Phi√™u l∆∞u</span>
                            </div>
                            <span class="category-count">95</span>
                        </a>
                        <a href="#" class="category-item" onclick="changeCategory('animation')">
                            <div class="category-name">
                                <span class="category-icon">üé®</span>
                                <span>Ho·∫°t h√¨nh</span>
                            </div>
                            <span class="category-count">70</span>
                        </a>
                        <a href="#" class="category-item" onclick="changeCategory('crime')">
                            <div class="category-name">
                                <span class="category-icon">üïµÔ∏è</span>
                                <span>T·ªôi ph·∫°m</span>
                            </div>
                            <span class="category-count">35</span>
                        </a>
                        <a href="#" class="category-item" onclick="changeCategory('scifi')">
                            <div class="category-name">
                                <span class="category-icon">üöÄ</span>
                                <span>Sci-Fi</span>
                            </div>
                            <span class="category-count">55</span>
                        </a>
                    </div>
                </div>

                <!-- Top Movies in Category -->
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Top h√†nh ƒë·ªông</h3>
                    <div class="top-movies">
                        <div class="top-movie" onclick="playMovie('john-wick-3')">
                            <div class="top-movie-poster">JW3</div>
                            <div class="top-movie-info">
                                <div class="top-movie-title">John Wick: Chapter 3</div>
                                <div class="top-movie-meta">2019 ‚Ä¢ 2h 11ph√∫t</div>
                                <div class="top-movie-rating">
                                    <span>‚≠ê</span>
                                    <span>7.4</span>
                                </div>
                            </div>
                        </div>

                        <div class="top-movie" onclick="playMovie('mad-max')">
                            <div class="top-movie-poster">MM</div>
                            <div class="top-movie-info">
                                <div class="top-movie-title">Mad Max: Fury Road</div>
                                <div class="top-movie-meta">2015 ‚Ä¢ 2h 0ph√∫t</div>
                                <div class="top-movie-rating">
                                    <span>‚≠ê</span>
                                    <span>8.1</span>
                                </div>
                            </div>
                        </div>

                        <div class="top-movie" onclick="playMovie('dark-knight')">
                            <div class="top-movie-poster">DK</div>
                            <div class="top-movie-info">
                                <div class="top-movie-title">The Dark Knight</div>
                                <div class="top-movie-meta">2008 ‚Ä¢ 2h 32ph√∫t</div>
                                <div class="top-movie-rating">
                                    <span>‚≠ê</span>
                                    <span>9.0</span>
                                </div>
                            </div>
                        </div>

                        <div class="top-movie" onclick="playMovie('terminator-2')">
                            <div class="top-movie-poster">T2</div>
                            <div class="top-movie-info">
                                <div class="top-movie-title">Terminator 2</div>
                                <div class="top-movie-meta">1991 ‚Ä¢ 2h 17ph√∫t</div>
                                <div class="top-movie-rating">
                                    <span>‚≠ê</span>
                                    <span>8.6</span>
                                </div>
                            </div>
                        </div>

                        <div class="top-movie" onclick="playMovie('die-hard')">
                            <div class="top-movie-poster">DH</div>
                            <div class="top-movie-info">
                                <div class="top-movie-title">Die Hard</div>
                                <div class="top-movie-meta">1988 ‚Ä¢ 2h 12ph√∫t</div>
                                <div class="top-movie-rating">
                                    <span>‚≠ê</span>
                                    <span>8.2</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <script>
        'use strict';

        // Movie database by category
        const movieDatabase = {
            action: [
                {
                    id: 'john-wick-3',
                    title: 'John Wick: Chapter 3 - Parabellum',
                    year: '2019',
                    rating: '7.4',
                    duration: '2h 11ph√∫t',
                    description: 'John Wick b·ªã truy n√£ v·ªõi m·ª©c ti·ªÅn th∆∞·ªüng 14 tri·ªáu ƒë√¥ la tr√™n ƒë·∫ßu v√† m·ªôt ƒë·ªôi qu√¢n s√°t th·ªß ƒëang truy ƒëu·ªïi anh ta.',
                    genres: ['H√†nh ƒë·ªông', 'Thriller', 'T·ªôi ph·∫°m'],
                    poster: 'JW3'
                },
                {
                    id: 'mad-max',
                    title: 'Mad Max: Fury Road',
                    year: '2015',
                    rating: '8.1',
                    duration: '2h 0ph√∫t',
                    description: 'Trong m·ªôt th·∫ø gi·ªõi h·∫≠u t·∫≠n th·∫ø, Max Rockatansky tham gia v√†o m·ªôt cu·ªôc ƒëu·ªïi b·∫Øt t·ªëc ƒë·ªô cao.',
                    genres: ['H√†nh ƒë·ªông', 'Phi√™u l∆∞u', 'Khoa h·ªçc vi·ªÖn t∆∞·ªüng'],
                    poster: 'MM'
                },
                {
                    id: 'dark-knight',
                    title: 'The Dark Knight',
                    year: '2008',
                    rating: '9.0',
                    duration: '2h 32ph√∫t',
                    description: 'Batman ph·∫£i ƒë·ªëi m·∫∑t v·ªõi m·ªôt trong nh·ªØng k·∫ª th√π nguy hi·ªÉm nh·∫•t - Joker.',
                    genres: ['H√†nh ƒë·ªông', 'T·ªôi ph·∫°m', 'Ch√≠nh k·ªãch'],
                    poster: 'DK'
                },
                {
                    id: 'terminator-2',
                    title: 'Terminator 2: Judgment Day',
                    year: '1991',
                    rating: '8.6',
                    duration: '2h 17ph√∫t',
                    description: 'M·ªôt Terminator ƒë∆∞·ª£c g·ª≠i v·ªÅ qu√° kh·ª© ƒë·ªÉ b·∫£o v·ªá John Connor kh·ªèi m·ªôt cyborg s√°t th·ªß ti√™n ti·∫øn h∆°n.',
                    genres: ['H√†nh ƒë·ªông', 'Khoa h·ªçc vi·ªÖn t∆∞·ªüng'],
                    poster: 'T2'
                },
                {
                    id: 'die-hard',
                    title: 'Die Hard',
                    year: '1988',
                    rating: '8.2',
                    duration: '2h 12ph√∫t',
                    description: 'M·ªôt c·∫£nh s√°t NYPD ph·∫£i c·ª©u v·ª£ m√¨nh v√† nh·ªØng con tin kh√°c kh·ªèi c√°c kh·ªßng b·ªë ƒê·ª©c.',
                    genres: ['H√†nh ƒë·ªông', 'Thriller'],
                    poster: 'DH'
                },
                {
                    id: 'mission-impossible',
                    title: 'Mission: Impossible - Fallout',
                    year: '2018',
                    rating: '7.7',
                    duration: '2h 27ph√∫t',
                    description: 'Ethan Hunt v√† ƒë·ªôi IMF ph·∫£i ƒëua v·ªõi th·ªùi gian ƒë·ªÉ ngƒÉn ch·∫∑n m·ªôt th·∫£m h·ªça to√†n c·∫ßu.',
                    genres: ['H√†nh ƒë·ªông', 'Phi√™u l∆∞u', 'Thriller'],
                    poster: 'MI'
                },
                {
                    id: 'matrix',
                    title: 'The Matrix',
                    year: '1999',
                    rating: '8.7',
                    duration: '2h 16ph√∫t',
                    description: 'M·ªôt l·∫≠p tr√¨nh vi√™n m√°y t√≠nh kh√°m ph√° ra th·ª±c t·∫ø l√† m·ªôt m√¥ ph·ªèng m√°y t√≠nh.',
                    genres: ['H√†nh ƒë·ªông', 'Khoa h·ªçc vi·ªÖn t∆∞·ªüng'],
                    poster: 'MTX'
                },
                {
                    id: 'gladiator',
                    title: 'Gladiator',
                    year: '2000',
                    rating: '8.5',
                    duration: '2h 35ph√∫t',
                    description: 'M·ªôt t∆∞·ªõng La M√£ b·ªã ph·∫£n b·ªôi tr·ªü th√†nh gladiator ƒë·ªÉ tr·∫£ th√π ho√†ng ƒë·∫ø tham nh≈©ng.',
                    genres: ['H√†nh ƒë·ªông', 'Ch√≠nh k·ªãch', 'Phi√™u l∆∞u'],
                    poster: 'GLD'
                }
            ],
            comedy: [
                {
                    id: 'superbad',
                    title: 'Superbad',
                    year: '2007',
                    rating: '7.6',
                    duration: '1h 53ph√∫t',
                    description: 'Hai b·∫°n th√¢n h·ªçc c·∫•p ba c·ªë g·∫Øng c√≥ ƒë∆∞·ª£c r∆∞·ª£u cho m·ªôt b·ªØa ti·ªác tr∆∞·ªõc khi t·ªët nghi·ªáp.',
                    genres: ['H√†i', 'Tu·ªïi teen'],
                    poster: 'SPB'
                },
                {
                    id: 'hangover',
                    title: 'The Hangover',
                    year: '2009',
                    rating: '7.7',
                    duration: '1h 40ph√∫t',
                    description: 'Ba ng∆∞·ªùi b·∫°n t·ªânh d·∫≠y sau m·ªôt ƒë√™m ti·ªác ƒë·ªôc th√¢n v√† kh√¥ng th·ªÉ nh·ªõ g√¨.',
                    genres: ['H√†i', 'B√≠ ·∫©n'],
                    poster: 'HO'
                },
                {
                    id: 'step-brothers',
                    title: 'Step Brothers',
                    year: '2008',
                    rating: '6.9',
                    duration: '1h 38ph√∫t',
                    description: 'Hai ng∆∞·ªùi ƒë√†n √¥ng tr∆∞·ªüng th√†nh ph·∫£i s·ªëng c√πng nhau khi cha m·∫π h·ªç k·∫øt h√¥n.',
                    genres: ['H√†i'],
                    poster: 'SB'
                }
            ],
            thriller: [
                {
                    id: 'se7en',
                    title: 'Se7en',
                    year: '1995',
                    rating: '8.6',
                    duration: '2h 7ph√∫t',
                    description: 'Hai th√°m t·ª≠ truy l√πng m·ªôt s√°t th·ªß h√†ng lo·∫°t s·ª≠ d·ª•ng b·∫£y t·ªôi l·ªói ch·∫øt ng∆∞·ªùi.',
                    genres: ['Thriller', 'T·ªôi ph·∫°m', 'B√≠ ·∫©n'],
                    poster: 'S7'
                },
                {
                    id: 'silence-lambs',
                    title: 'The Silence of the Lambs',
                    year: '1991',
                    rating: '8.6',
                    duration: '1h 58ph√∫t',
                    description: 'M·ªôt ƒë·∫∑c v·ª• FBI t√¢n binh ph·∫£i c√≥ ƒë∆∞·ª£c s·ª± gi√∫p ƒë·ª° c·ªßa Hannibal Lecter.',
                    genres: ['Thriller', 'T·ªôi ph·∫°m', 'Kinh d·ªã'],
                    poster: 'SL'
                }
            ],
            horror: [
                {
                    id: 'exorcist',
                    title: 'The Exorcist',
                    year: '1973',
                    rating: '8.1',
                    duration: '2h 2ph√∫t',
                    description: 'Khi m·ªôt c√¥ g√°i 12 tu·ªïi b·ªã qu·ª∑ √°m, m·∫π c√¥ t√¨m ki·∫øm s·ª± gi√∫p ƒë·ª° c·ªßa hai linh m·ª•c.',
                    genres: ['Kinh d·ªã', 'Si√™u nhi√™n'],
                    poster: 'EX'
                },
                {
                    id: 'halloween',
                    title: 'Halloween',
                    year: '1978',
                    rating: '7.7',
                    duration: '1h 31ph√∫t',
                    description: 'M·ªôt s√°t th·ªß t√¢m th·∫ßn tr·ªën tho√°t v√† quay v·ªÅ th·ªã tr·∫•n qu√™ h∆∞∆°ng ƒë·ªÉ gi·∫øt ng∆∞·ªùi.',
                    genres: ['Kinh d·ªã', 'Thriller'],
                    poster: 'HW'
                }
            ],
            adventure: [
                {
                    id: 'indiana-jones',
                    title: 'Raiders of the Lost Ark',
                    year: '1981',
                    rating: '8.5',
                    duration: '1h 55ph√∫t',
                    description: 'Nh√† kh·∫£o c·ªï h·ªçc Indiana Jones ƒëua v·ªõi ƒê·ª©c Qu·ªëc x√£ ƒë·ªÉ t√¨m H√≤m th·ªù m·∫•t t√≠ch.',
                    genres: ['Phi√™u l∆∞u', 'H√†nh ƒë·ªông'],
                    poster: 'IJ'
                },
                {
                    id: 'pirates',
                    title: 'Pirates of the Caribbean',
                    year: '2003',
                    rating: '8.1',
                    duration: '2h 23ph√∫t',
                    description: 'Th·ª£ r√®n Will Turner c√πng h·∫£i t·∫∑c Jack Sparrow c·ª©u t√¨nh y√™u c·ªßa anh.',
                    genres: ['Phi√™u l∆∞u', 'H√†nh ƒë·ªông', 'Gi·∫£ t∆∞·ªüng'],
                    poster: 'PC'
                }
            ],
            animation: [
                {
                    id: 'toy-story',
                    title: 'Toy Story',
                    year: '1995',
                    rating: '8.3',
                    duration: '1h 21ph√∫t',
                    description: 'M·ªôt cowboy ƒë·ªì ch∆°i ghen t·ªã khi m·ªôt phi h√†nh gia ƒë·ªì ch∆°i m·ªõi tr·ªü th√†nh m√≥n ƒë·ªì ch∆°i y√™u th√≠ch.',
                    genres: ['Ho·∫°t h√¨nh', 'Gia ƒë√¨nh', 'H√†i'],
                    poster: 'TS'
                },
                {
                    id: 'finding-nemo',
                    title: 'Finding Nemo',
                    year: '2003',
                    rating: '8.2',
                    duration: '1h 40ph√∫t',
                    description: 'M·ªôt con c√° h·ªÅ t√¨m ki·∫øm con trai b·ªã m·∫•t c·ªßa m√¨nh trong ƒë·∫°i d∆∞∆°ng.',
                    genres: ['Ho·∫°t h√¨nh', 'Gia ƒë√¨nh', 'Phi√™u l∆∞u'],
                    poster: 'FN'
                }
            ],
            crime: [
                {
                    id: 'godfather',
                    title: 'The Godfather',
                    year: '1972',
                    rating: '9.2',
                    duration: '2h 55ph√∫t',
                    description: 'Patriarch c·ªßa m·ªôt tri·ªÅu ƒë·∫°i t·ªôi ph·∫°m t·ªï ch·ª©c chuy·ªÉn giao quy·ªÅn ki·ªÉm so√°t cho con trai mi·ªÖn c∆∞·ª°ng.',
                    genres: ['T·ªôi ph·∫°m', 'Ch√≠nh k·ªãch'],
                    poster: 'GF'
                },
                {
                    id: 'goodfellas',
                    title: 'Goodfellas',
                    year: '1990',
                    rating: '8.7',
                    duration: '2h 26ph√∫t',
                    description: 'C√¢u chuy·ªán v·ªÅ Henry Hill v√† cu·ªôc s·ªëng trong mafia t·ª´ nƒÉm 1955 ƒë·∫øn 1980.',
                    genres: ['T·ªôi ph·∫°m', 'Ch√≠nh k·ªãch'],
                    poster: 'GG'
                }
            ],
            scifi: [
                {
                    id: 'blade-runner',
                    title: 'Blade Runner 2049',
                    year: '2017',
                    rating: '8.0',
                    duration: '2h 44ph√∫t',
                    description: 'M·ªôt blade runner tr·∫ª kh√°m ph√° ra m·ªôt b√≠ m·∫≠t c√≥ th·ªÉ l√†m r·ªëi lo·∫°n x√£ h·ªôi.',
                    genres: ['Khoa h·ªçc vi·ªÖn t∆∞·ªüng', 'Ch√≠nh k·ªãch', 'Thriller'],
                    poster: 'BR'
                },
                {
                    id: 'interstellar',
                    title: 'Interstellar',
                    year: '2014',
                    rating: '8.7',
                    duration: '2h 49ph√∫t',
                    description: 'M·ªôt nh√≥m nh√† th√°m hi·ªÉm du h√†nh qua m·ªôt l·ªó s√¢u trong kh√¥ng gian ƒë·ªÉ c·ª©u nh√¢n lo·∫°i.',
                    genres: ['Khoa h·ªçc vi·ªÖn t∆∞·ªüng', 'Ch√≠nh k·ªãch', 'Phi√™u l∆∞u'],
                    poster: 'IS'
                }
            ]
        };

        // Category information
        const categoryInfo = {
            action: {
                title: 'H√†nh ƒê·ªông',
                subtitle: 'Nh·ªØng b·ªô phim ƒë·∫ßy k·ªãch t√≠nh v√† h·∫•p d·∫´n nh·∫•t',
                icon: 'üí•',
                class: 'action',
                count: 120,
                avgRating: 8.2,
                newMovies: 12
            },
            comedy: {
                title: 'H√†i',
                subtitle: 'Nh·ªØng kho·∫£nh kh·∫Øc vui nh·ªôn v√† gi·∫£i tr√≠ tuy·ªát v·ªùi',
                icon: 'üòÇ',
                class: 'comedy',
                count: 85,
                avgRating: 7.5,
                newMovies: 8
            },
            thriller: {
                title: 'Thriller',
                subtitle: 'Nh·ªØng b·ªô phim gi·ªØ b·∫°n trong tr·∫°ng th√°i cƒÉng th·∫≥ng',
                icon: 'üò±',
                class: 'thriller',
                count: 45,
                avgRating: 8.4,
                newMovies: 5
            },
            horror: {
                title: 'Kinh D·ªã',
                subtitle: 'Nh·ªØng b·ªô phim khi·∫øn b·∫°n r√πng m√¨nh v√† s·ª£ h√£i',
                icon: 'üëª',
                class: 'horror',
                count: 60,
                avgRating: 7.8,
                newMovies: 7
            },
            adventure: {
                title: 'Phi√™u L∆∞u',
                subtitle: 'Nh·ªØng cu·ªôc h√†nh tr√¨nh ƒë·∫ßy m·∫°o hi·ªÉm v√† kh√°m ph√°',
                icon: 'üó∫Ô∏è',
                class: 'adventure',
                count: 95,
                avgRating: 8.0,
                newMovies: 10
            },
            animation: {
                title: 'Ho·∫°t H√¨nh',
                subtitle: 'Nh·ªØng b·ªô phim ho·∫°t h√¨nh d√†nh cho m·ªçi l·ª©a tu·ªïi',
                icon: 'üé®',
                class: 'animation',
                count: 70,
                avgRating: 8.1,
                newMovies: 6
            },
            crime: {
                title: 'T·ªôi Ph·∫°m',
                subtitle: 'Nh·ªØng c√¢u chuy·ªán v·ªÅ th·∫ø gi·ªõi ng·∫ßm v√† t·ªôi ph·∫°m',
                icon: 'üïµÔ∏è',
                class: 'crime',
                count: 35,
                avgRating: 8.8,
                newMovies: 3
            },
            scifi: {
                title: 'Sci-Fi',
                subtitle: 'Nh·ªØng b·ªô phim khoa h·ªçc vi·ªÖn t∆∞·ªüng ƒë·∫ßy t∆∞∆°ng lai',
                icon: 'üöÄ',
                class: 'scifi',
                count: 55,
                avgRating: 8.3,
                newMovies: 4
            }
        };

        // Current state
        let currentCategory = 'action';
        let currentPage = 1;
        let currentView = 'grid';
        let currentSort = 'popular';
        let displayedMovies = 0;
        const moviesPerPage = 12;

        // DOM Elements
        const categoryHero = document.getElementById('categoryHero');
        const categoryTitle = document.getElementById('categoryTitle');
        const categorySubtitle = document.getElementById('categorySubtitle');
        const breadcrumbCategory = document.getElementById('breadcrumbCategory');
        const totalMovies = document.getElementById('totalMovies');
        const avgRating = document.getElementById('avgRating');
        const newMovies = document.getElementById('newMovies');
        const resultsCount = document.getElementById('resultsCount');
        const moviesGrid = document.getElementById('moviesGrid');
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        const notification = document.getElementById('notification');

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
        });

        function initializePage() {
            // Get category from URL or default to action
            const urlParams = new URLSearchParams(window.location.search);
            currentCategory = urlParams.get('category') || 'action';
            
            updateCategoryDisplay();
            displayMovies();
        }

        function setupEventListeners() {
            // Sort options
            document.querySelectorAll('.sort-option').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.sort-option').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentSort = this.dataset.sort;
                    displayMovies();
                });
            });

            // View toggle
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentView = this.dataset.view;
                    toggleView();
                });
            });

            // Filters
            document.getElementById('yearFilter').addEventListener('change', displayMovies);
            document.getElementById('ratingFilter').addEventListener('change', displayMovies);

            // Search
            document.getElementById('searchBox').addEventListener('input', handleSearch);

            // Pagination
            document.querySelectorAll('.pagination-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.dataset.page === 'prev') {
                        currentPage = Math.max(1, currentPage - 1);
                    } else if (this.dataset.page === 'next') {
                        currentPage = currentPage + 1;
                    } else {
                        currentPage = parseInt(this.dataset.page);
                    }
                    displayMovies();
                    updatePagination();
                });
            });
        }

        function updateCategoryDisplay() {
            const info = categoryInfo[currentCategory];
            
            // Update hero section
            categoryHero.className = `category-hero ${info.class}`;
            categoryTitle.textContent = info.title;
            categorySubtitle.textContent = info.subtitle;
            breadcrumbCategory.textContent = info.title;
            
            // Update stats
            totalMovies.textContent = info.count;
            avgRating.textContent = info.avgRating;
            newMovies.textContent = info.newMovies;
            
            // Update page title
            document.title = `Phim ${info.title} - Maxion`;
            
            // Update active category in sidebar
            document.querySelectorAll('.category-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[onclick*="${currentCategory}"]`).classList.add('active');
        }

        function displayMovies() {
            const movies = getFilteredMovies();
            const sortedMovies = sortMovies(movies);
            
            moviesGrid.innerHTML = '';
            displayedMovies = 0;
            
            // Update results count
            resultsCount.textContent = sortedMovies.length;
            
            // Load first batch
            loadMovieBatch(sortedMovies);
        }

        function getFilteredMovies() {
            let movies = movieDatabase[currentCategory] || [];
            
            // Apply year filter
            const yearFilter = document.getElementById('yearFilter').value;
            if (yearFilter !== 'all') {
                movies = movies.filter(movie => {
                    const year = parseInt(movie.year);
                    switch(yearFilter) {
                        case '2024': return year === 2024;
                        case '2023': return year === 2023;
                        case '2022': return year === 2022;
                        case '2021': return year === 2021;
                        case '2020': return year === 2020;
                        case '2010s': return year >= 2010 && year <= 2019;
                        case '2000s': return year >= 2000 && year <= 2009;
                        default: return true;
                    }
                });
            }
            
            // Apply rating filter
            const ratingFilter = document.getElementById('ratingFilter').value;
            if (ratingFilter !== 'all') {
                const minRating = parseFloat(ratingFilter.replace('+', ''));
                movies = movies.filter(movie => parseFloat(movie.rating) >= minRating);
            }
            
            return movies;
        }

        function sortMovies(movies) {
            switch(currentSort) {
                case 'newest':
                    return movies.sort((a, b) => parseInt(b.year) - parseInt(a.year));
                case 'rating':
                    return movies.sort((a, b) => parseFloat(b.rating) - parseFloat(a.rating));
                case 'name':
                    return movies.sort((a, b) => a.title.localeCompare(b.title));
                case 'popular':
                default:
                    return movies.sort((a, b) => parseFloat(b.rating) - parseFloat(a.rating));
            }
        }

        function loadMovieBatch(movies) {
            const endIndex = Math.min(displayedMovies + moviesPerPage, movies.length);
            
            for (let i = displayedMovies; i < endIndex; i++) {
                const movie = movies[i];
                const movieCard = createMovieCard(movie);
                moviesGrid.appendChild(movieCard);
            }
            
            displayedMovies = endIndex;
            
            // Update load more button
            if (displayedMovies >= movies.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'block';
            }
        }

        function createMovieCard(movie) {
            const div = document.createElement('div');
            div.className = `movie-card ${currentView === 'list' ? 'list-view' : ''}`;
            
            div.innerHTML = `
                <div class="movie-poster">
                    <div style="width: 100%; height: 100%; background: var(--secondary-bg); display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; color: var(--text-muted);">
                        ${movie.poster}
                    </div>
                    <div class="movie-overlay">
                        <button class="play-btn" onclick="playMovie('${movie.id}')">‚ñ∂</button>
                    </div>
                    <div class="movie-actions">
                        <button class="action-btn" onclick="toggleBookmark('${movie.id}')" title="Th√™m v√†o y√™u th√≠ch">
                            ‚ù§Ô∏è
                        </button>
                        <button class="action-btn" onclick="addToWatchLater('${movie.id}')" title="Xem sau">
                            üîñ
                        </button>
                    </div>
                </div>
                <div class="movie-info">
                    <h3 class="movie-title">${movie.title}</h3>
                    <div class="movie-meta">
                        <span>${movie.year}</span>
                        <span>${movie.duration}</span>
                        <div class="movie-rating">
                            <span>‚≠ê</span>
                            <span>${movie.rating}</span>
                        </div>
                    </div>
                    <p class="movie-description">${movie.description}</p>
                    <div class="movie-genres">
                        ${movie.genres.map(genre => `<span class="genre-tag">${genre}</span>`).join('')}
                    </div>
                </div>
            `;
            
            return div;
        }

        function toggleView() {
            const cards = document.querySelectorAll('.movie-card');
            cards.forEach(card => {
                if (currentView === 'list') {
                    card.classList.add('list-view');
                } else {
                    card.classList.remove('list-view');
                }
            });
            
            if (currentView === 'list') {
                moviesGrid.classList.add('list-view');
            } else {
                moviesGrid.classList.remove('list-view');
            }
        }

        function loadMoreMovies() {
            const movies = getFilteredMovies();
            const sortedMovies = sortMovies(movies);
            loadMovieBatch(sortedMovies);
            showNotification('ƒê√£ t·∫£i th√™m phim', 'success');
        }

        function changeCategory(category) {
            currentCategory = category;
            currentPage = 1;
            displayedMovies = 0;
            
            // Update URL
            const url = new URL(window.location);
            url.searchParams.set('category', category);
            window.history.pushState({}, '', url);
            
            updateCategoryDisplay();
            displayMovies();
            
            showNotification(`ƒê√£ chuy·ªÉn sang th·ªÉ lo·∫°i ${categoryInfo[category].title}`, 'success');
        }

        function handleSearch(e) {
            const query = e.target.value.toLowerCase().trim();
            
            if (query.length === 0) {
                displayMovies();
                return;
            }
            
            const movies = movieDatabase[currentCategory] || [];
            const filteredMovies = movies.filter(movie => 
                movie.title.toLowerCase().includes(query) ||
                movie.description.toLowerCase().includes(query) ||
                movie.genres.some(genre => genre.toLowerCase().includes(query))
            );
            
            moviesGrid.innerHTML = '';
            displayedMovies = 0;
            
            if (filteredMovies.length === 0) {
                showEmptyState('Kh√¥ng t√¨m th·∫•y phim n√†o ph√π h·ª£p');
            } else {
                const sortedMovies = sortMovies(filteredMovies);
                loadMovieBatch(sortedMovies);
                resultsCount.textContent = filteredMovies.length;
            }
        }

        function showEmptyState(message) {
            moviesGrid.innerHTML = `
                <div class="empty-state" style="grid-column: 1 / -1;">
                    <div class="empty-state-icon">üé¨</div>
                    <h3>Kh√¥ng c√≥ k·∫øt qu·∫£</h3>
                    <p>${message}</p>
                </div>
            `;
        }

        function updatePagination() {
            document.querySelectorAll('.pagination-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.page == currentPage) {
                    btn.classList.add('active');
                }
            });
        }

        // Movie actions
        function playMovie(movieId) {
            showNotification(`ƒêang ph√°t phim...`, 'success');
            // In a real app, navigate to video player
            setTimeout(() => {
                window.location.href = `video-player.html?movie=${movieId}`;
            }, 1000);
        }

        function toggleBookmark(movieId) {
            const movie = findMovieById(movieId);
            showNotification(`ƒê√£ th√™m "${movie.title}" v√†o y√™u th√≠ch`, 'success');
        }

        function addToWatchLater(movieId) {
            const movie = findMovieById(movieId);
            showNotification(`ƒê√£ th√™m "${movie.title}" v√†o danh s√°ch xem sau`, 'success');
        }

        function findMovieById(movieId) {
            for (const category in movieDatabase) {
                const movie = movieDatabase[category].find(m => m.id === movieId);
                if (movie) return movie;
            }
            return null;
        }

        function openProfile() {
            showNotification('ƒêang m·ªü trang h·ªì s∆°...', 'success');
        }

        // Notification system
        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize with URL category
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('category')) {
            currentCategory = urlParams.get('category');
        }
    </script>
</body>
</html>