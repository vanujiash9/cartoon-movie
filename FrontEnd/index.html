<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maxion - Trang phim online t·ªët nh·∫•t</title>

    <!-- Favicon v√† Meta Tags -->
    <link rel="icon" type="image/x-icon"
        href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREREREREREREREREREREREQAAAAAAAAABEAERERERERARAAERERERERERAQEREREREREQEQEREREREREQEBERERERERAQEAAREREREQEAAAEREREREAARAAAREREQAAEAEAAREQAAAQABAAEQAAAAEAAQAQAAAAEAARAAABAAAQEAAREAABABABEQEREQEBEQEREREQEBABEREREAAAERERERAAAAAREREREREQERERERERABEQERERERERAQEREREREREQEQERERERERERABERERERERERAREREREREREQEQEREREREREREQEREREREREREQERERERERERERAREREREREREREAERERERERERABAAAAABAAAAAEAABAABAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAg">
    <meta name="description" content="Xem phim online ch·∫•t l∆∞·ª£ng cao t·∫°i Maxion">
    <meta name="keywords" content="phim online, xem phim, maxion">
    <!-- CSS -->
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./header.css">
</head>

<body>
    <!-- Integrated Header (No iframe) -->
    <header>
        <div class="navbar" id="navbar">
            <a href="#" class="navbar-brand" onclick="scrollToTop()">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTQwIDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8dGV4dCB4PSIyMCIgeT0iMjgiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC13ZWlnaHQ9ImJvbGQiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiMzNDk4ZGIiPk1heGlvbjwvdGV4dD4KPC9zdmc+"
                    alt="Maxion Logo">
            </a>

            <nav id="navMenu">
                <ul class="navbar-nav">
                    <li><a href="#" class="navbar-link" onclick="scrollToSection('top')">Trang ch·ªß</a></li>
                    <li><a href="#" class="navbar-link" onclick="scrollToSection('movies')">Danh s√°ch phim</a></li>
                    <li><a href="#" class="navbar-link indicator" onclick="scrollToSection('achievements')">Th√†nh
                            t·ª±u</a></li>
                    <li><a href="#" class="navbar-link" onclick="scrollToSection('category')">Th·ªÉ lo·∫°i</a></li>
                    <li><a href="#" class="navbar-link" onclick="scrollToSection('live')">TV Tr·ª±c ti·∫øp</a></li>
                </ul>
            </nav>

            <div class="navbar-actions">
                <form class="navbar-form" id="searchForm">
                    <input type="text" name="search" placeholder="T√¨m ki·∫øm phim..." class="navbar-form-search"
                        id="searchInput">
                    <button type="button" class="navbar-form-btn" id="searchBtn">
                        <span style="font-size: 18px;">üîç</span>
                    </button>
                    <div class="search-suggestions" id="searchSuggestions"></div>
                </form>

                <button class="voice-btn" id="voiceBtn" title="T√¨m ki·∫øm b·∫±ng gi·ªçng n√≥i">
                    <span>üé§</span>
                </button>
                <!-- Notification Bell -->
                <div class="notification-bell" id="notificationBell"
                    style="position: relative; margin-right: 16px; cursor: pointer;">
                    <span style="font-size: 22px;">üîî</span>
                    <span id="notificationBadge"
                        style="position: absolute; top: -4px; right: -4px; background: red; color: white; border-radius: 50%; font-size: 12px; padding: 2px 6px; display: none;">0</span>
                    <div id="notificationDropdown" class="notification-dropdown"
                        style="position: absolute; right: 0; top: 32px; background: #fff; color: #222; min-width: 320px; max-width: 400px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); border-radius: 8px; z-index: 1000;">
                        <div style="padding: 12px; font-weight: bold; border-bottom: 1px solid #eee;">Th√¥ng b√°o</div>
                        <div id="notificationList" style="max-height: 350px; overflow-y: auto;"></div>
                        <div style="padding: 8px; text-align: center; border-top: 1px solid #eee;">
                            <a href="#" onclick="markAllNotificationsRead(); return false;"
                                style="color: #3498db; font-size: 14px;">ƒê√°nh d·∫•u t·∫•t c·∫£ ƒë√£ ƒë·ªçc</a>
                        </div>
                    </div>
                </div>
                <!-- Sign In Button (shown when NOT logged in) -->
                <a href="./login_register/login.html" class="navbar-signin" id="signInBtn">
                    <span id="signInText">ƒêƒÉng nh·∫≠p</span>
                    <span style="margin-left: 8px;">‚û°Ô∏è</span>
                </a>

                <!-- User Menu (shown when logged in) -->
                <div class="user-menu" id="userMenu" style="display: none;">
                    <div class="user-info-display" id="userInfoDisplay">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiMzNDk4ZGIiLz4KPHN2ZyB4PSIxMCIgeT0iMTAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+Cjx0ZXh0IHg9IjEwIiB5PSIxNSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSI+VTwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg=="
                            alt="User Avatar" class="user-avatar" id="userAvatar">
                        <span class="user-name" id="displayUserName">Ng∆∞·ªùi d√πng</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-item" onclick="viewProfile()">
                            <span>üë§</span>
                            H·ªì s∆° c·ªßa t√¥i
                        </div>
                        <div class="dropdown-item" onclick="viewBookmarks()">
                            <span>‚ù§Ô∏è</span>
                            Danh s√°ch y√™u th√≠ch
                        </div>
                        <div class="dropdown-item" onclick="viewHistory()">
                            <span>‚è∞</span>
                            L·ªãch s·ª≠ xem
                        </div>
                        <div class="dropdown-item" onclick="logout()">
                            <span>üö™</span>
                            ƒêƒÉng xu·∫•t
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <main>
            <section class="banner">
                <div class="banner-card" onclick="playBannerMovie()">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDkwMCA1MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI5MDAiIGhlaWdodD0iNTAwIiBmaWxsPSJ1cmwoI2dyYWRpZW50MCkiLz4KPHN0eWxlPgouYmFubmVyLXRleHQgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGZvbnQtd2VpZ2h0OiBib2xkOyBmaWxsOiB3aGl0ZTsgfQo8L3N0eWxlPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDAiIHgxPSIwIiB5MT0iMCIgeDI9IjkwMCIgeTI9IjUwMCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMWUzYzcyIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzJhNTI5OCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjx0ZXh0IHg9IjQ1MCIgeT0iMjMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBjbGFzcz0iYmFubmVyLXRleHQiIGZvbnQtc2l6ZT0iNDgiPkpvaG4gV2ljayAzPC90ZXh0Pgo8dGV4dCB4PSI0NTAiIHk9IjI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgY2xhc3M9ImJhbm5lci10ZXh0IiBmb250LXNpemU9IjE4Ij5QYXJhYmVsbHVtPC90ZXh0Pgo8L3N2Zz4="
                        alt="John Wick 3 Banner" class="banner-img">

                    <div class="banner-play-btn">
                        <span>‚ñ∂</span>
                    </div>

                    <div class="card-content">
                        <div class="card-info">
                            <div class="genre">
                                <span>üé¨ H√†nh ƒë·ªông/Thriller</span>
                            </div>

                            <div class="year">
                                <span>üìÖ 2019</span>
                            </div>

                            <div class="duration">
                                <span>‚è±Ô∏è 2h 11ph√∫t</span>
                            </div>

                            <div class="quality">4K</div>
                        </div>
                        <h2 class="card-title">John Wick: Chapter 3 - Parabellum</h2>
                    </div>
                </div>
            </section>

            <section class="movies" id="movies">
                <h2 class="section-heading">Phim Hot</h2>

                <div class="filter-bar">
                    <div class="filter-dropdowns">
                        <select name="genre" class="genre" id="genreFilter">
                            <option value="all">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
                            <option value="action">H√†nh ƒë·ªông</option>
                            <option value="adventure">Phi√™u l∆∞u</option>
                            <option value="animation">Ho·∫°t h√¨nh</option>
                            <option value="comedy">H√†i</option>
                            <option value="drama">Ch√≠nh k·ªãch</option>
                            <option value="fantasy">Gi·∫£ t∆∞·ªüng</option>
                            <option value="horror">Kinh d·ªã</option>
                            <option value="scifi">Khoa h·ªçc vi·ªÖn t∆∞·ªüng</option>
                            <option value="war">Chi·∫øn tranh</option>
                        </select>

                        <select name="year" class="year" id="yearFilter">
                            <option value="all">T·∫•t c·∫£ nƒÉm</option>
                            <option value="2024">2024</option>
                            <option value="2020-2023">2020-2023</option>
                            <option value="2010-2019">2010-2019</option>
                            <option value="2000-2009">2000-2009</option>
                            <option value="1980-1999">1980-1999</option>
                        </select>
                    </div>

                    <div class="filter-radios">
                        <input type="radio" name="grade" id="featured" checked>
                        <label for="featured">ƒê·∫∑c bi·ªát</label>

                        <input type="radio" name="grade" id="popular">
                        <label for="popular">Ph·ªï bi·∫øn</label>

                        <input type="radio" name="grade" id="newest">
                        <label for="newest">M·ªõi nh·∫•t</label>

                        <div class="checked-radio-bg"></div>
                    </div>
                </div>

                <div class="movies-grid" id="moviesGrid">
                    <!-- Movies will be populated by JavaScript -->
                </div>

                <button class="load-more" id="loadMore">T·∫¢I TH√äM</button>
            </section>

            <section class="category" id="category">
                <h2 class="section-heading">Th·ªÉ lo·∫°i</h2>

                <div class="category-grid">
                    <div class="category-card category-action" onclick="filterByCategory('action')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMwMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjZGMyNjI2Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPkjDoG5oIMSR4buZbmc8L3RleHQ+Cjwvc3ZnPg=="
                            alt="H√†nh ƒë·ªông" class="card-img">
                        <div class="name">H√†nh ƒë·ªông</div>
                        <div class="total">120</div>
                    </div>

                    <div class="category-card category-comedy" onclick="filterByCategory('comedy')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMwMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjZjM5YzEyIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPkjDoGk8L3RleHQ+Cjwvc3ZnPg=="
                            alt="H√†i" class="card-img">
                        <div class="name">H√†i</div>
                        <div class="total">85</div>
                    </div>

                    <div class="category-card category-thriller" onclick="filterByCategory('thriller')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMwMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjNzQzZjM5Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPlRocmlsbGVyPC90ZXh0Pgo8L3N2Zz4="
                            alt="Thriller" class="card-img">
                        <div class="name">Thriller</div>
                        <div class="total">45</div>
                    </div>

                    <div class="category-card category-horror" onclick="filterByCategory('horror')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMwMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjMmMzZTUwIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPktpbmcgxJHhu4s8L3RleHQ+Cjwvc3ZnPg=="
                            alt="Kinh d·ªã" class="card-img">
                        <div class="name">Kinh d·ªã</div>
                        <div class="total">60</div>
                    </div>

                    <div class="category-card category-adventure" onclick="filterByCategory('adventure')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMwMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjMjc4NGU3Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPlBoaWV1IGzGsOG7pW5nPC90ZXh0Pgo8L3N2Zz4="
                            alt="Phi√™u l∆∞u" class="card-img">
                        <div class="name">Phi√™u l∆∞u</div>
                        <div class="total">95</div>
                    </div>

                    <div class="category-card category-animation" onclick="filterByCategory('animation')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMwMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjZWQ0ODEyIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPkhv4bqhdCBow6xuaDwvdGV4dD4KPC9zdmc+"
                            alt="Ho·∫°t h√¨nh" class="card-img">
                        <div class="name">Ho·∫°t h√¨nh</div>
                        <div class="total">70</div>
                    </div>

                    <div class="category-card category-crime" onclick="filterByCategory('crime')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMwMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjMzQzYTQwIi8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPlThu5lpIHBo4bqhbTwvdGV4dD4KPC9zdmc+"
                            alt="T·ªôi ph·∫°m" class="card-img">
                        <div class="name">T·ªôi ph·∫°m</div>
                        <div class="total">35</div>
                    </div>

                    <div class="category-card category-scifi" onclick="filterByCategory('scifi')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMwMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMTgwIiBmaWxsPSIjOWI1OWI2Ii8+Cjx0ZXh0IHg9IjE1MCIgeT0iOTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiPlNjaS1GaTwvdGV4dD4KPC9zdmc+"
                            alt="Khoa h·ªçc vi·ªÖn t∆∞·ªüng" class="card-img">
                        <div class="name">Sci-fi</div>
                        <div class="total">55</div>
                    </div>
                </div>
            </section>
            <section class="achievements" id="achievements">
                <h2 class="section-heading">Th√†nh t·ª±u c·ªßa b·∫°n</h2>

                <div class="achievement-cards-container">
                    <div class="achievement-cards" id="achievementCards">
                        <!-- Th√†nh t·ª±u s·∫Ω ƒë∆∞·ª£c load t·ª´ backend -->
                    </div>
                    <!-- ƒê√£ lo·∫°i b·ªè achievements-navigation v√† c√°c n√∫t prev/next, dots -->
                </div>
            </section>

            <section class="live" id="live">
                <h2 class="section-heading">TV Shows Tr·ª±c Ti·∫øp</h2>

                <div class="live-grid">
                    <div class="live-card" onclick="playLiveStream('planet-earth')">
                        <div class="card-head">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDMwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjgwIiBmaWxsPSJ1cmwoI2dyYWRpZW50MCkiLz4KPHN0eWxlPgoudGl0bGUgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGZvbnQtd2VpZ2h0OiBib2xkOyBmaWxsOiB3aGl0ZTsgfQo8L3N0eWxlPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDAiIHgxPSIwIiB5MT0iMCIgeDI9IjMwMCIgeTI9IjI4MCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMzQ5ODAwIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIzNzEwMCIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjx0ZXh0IHg9IjE1MCIgeT0iMTMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBjbGFzcz0idGl0bGUiIGZvbnQtc2l6ZT0iMjAiPlBsYW5ldCBFYXJ0aDwvdGV4dD4KPHR4dCB4PSIxNTAiIHk9IjE2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgY2xhc3M9InRpdGxlIiBmb250LXNpemU9IjE2Ij5TQUE9Pc b25lIC0gSXNsYW5kczwvdGV4dD4KPC9zdmc+"
                                alt="Planet Earth II" class="card-img">
                            <div class="live-badge">LIVE</div>
                            <div class="total-viewers">305K ng∆∞·ªùi xem</div>
                            <div class="play">
                                <span>‚≠ï</span>
                            </div>
                        </div>

                        <div class="card-body">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjNDI4NWY0IiByeD0iMTUiLz4KPHR4dCB4PSIyNSIgeT0iMzIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiPkJCQzwvdGV4dD4KPC9zdmc+"
                                alt="BBC America" class="avatar">
                            <h3 class="card-title">Planet Earth II <br> Season 1 - Islands</h3>
                        </div>
                    </div>

                    <div class="live-card" onclick="playLiveStream('game-of-thrones')">
                        <div class="card-head">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDMwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjgwIiBmaWxsPSJ1cmwoI2dyYWRpZW50MCkiLz4KPHN0eWxlPgoudGl0bGUgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGZvbnQtd2VpZ2h0OiBib2xkOyBmaWxsOiB3aGl0ZTsgfQo8L3N0eWxlPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDAiIHgxPSIwIiB5MT0iMCIgeDI9IjMwMCIgeTI9IjI4MCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjNjQxZTMwIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzMzMGMxZiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjx0ZXh0IHg9IjE1MCIgeT0iMTMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBjbGFzcz0idGl0bGUiIGZvbnQtc2l6ZT0iMjAiPkdhbWUgb2YgVGhyb25lczwvdGV4dD4KPHR4dCB4PSIxNTAiIHk9IjE2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgY2xhc3M9InRpdGxlIiBmb250LXNpemU9IjE2Ij5TRUE9b24gNSAtIE1vdGhlcidzIE1lcmN5PC90ZXh0Pgo8L3N2Zz4="
                                alt="Game of Thrones" class="card-img">
                            <div class="live-badge">LIVE</div>
                            <div class="total-viewers">1.7M ng∆∞·ªùi xem</div>
                            <div class="play">
                                <span>‚≠ï</span>
                            </div>
                        </div>

                        <div class="card-body">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjMTEwODFlIiByeD0iMTUiLz4KPHR4dCB4PSIyNSIgeT0iMzIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiPkhCTzwvdGV4dD4KPC9zdmc+"
                                alt="HBO" class="avatar">
                            <h3 class="card-title">Game of Thrones <br> Season 5 - Mother's Mercy</h3>
                        </div>
                    </div>

                    <div class="live-card" onclick="playLiveStream('vikings')">
                        <div class="card-head">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjI4MCIgdmlld0JveD0iMCAwIDMwMCAyODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjgwIiBmaWxsPSJ1cmwoI2dyYWRpZW50MCkiLz4KPHN0eWxlPgoudGl0bGUgeyBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7IGZvbnQtd2VpZ2h0OiBib2xkOyBmaWxsOiB3aGl0ZTsgfQo8L3N0eWxlPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDAiIHgxPSIwIiB5MT0iMCIgeDI9IjMwMCIgeTI9IjI4MCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjNTQ2ZTdhIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzM3NGY1MyIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+Cjx0ZXh0IHg9IjE1MCIgeT0iMTMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBjbGFzcz0idGl0bGUiIGZvbnQtc2l6ZT0iMjAiPlZpa2luZ3M8L3RleHQ+Cjx0ZXh0IHg9IjE1MCIgeT0iMTYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBjbGFzcz0idGl0bGUiIGZvbnQtc2l6ZT0iMTYiPlNlYXNvbiA0IC0gV2hhdCBNaWdodCBIYXZlIEJlZW48L3RleHQ+Cjwvc3ZnPg=="
                                alt="Vikings" class="card-img">
                            <div class="live-badge">LIVE</div>
                            <div class="total-viewers">468K ng∆∞·ªùi xem</div>
                            <div class="play">
                                <span>‚≠ï</span>
                            </div>
                        </div>

                        <div class="card-body">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjMTEwODFlIiByeD0iMTUiLz4KPHR4dCB4PSIyNSIgeT0iMzIiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiPkhCTzwvdGV4dD4KPC9zdmc+"
                                alt="HBO" class="avatar">
                            <h3 class="card-title">Vikings <br> Season 4 - What Might Have Been</h3>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Include Footer -->
    <iframe src="./footer.html" class="footer-frame" id="footerFrame" onload="initFooterIframe()"></iframe>
    <!-- Load JavaScript -->
    <script src="./script.js"></script>
    <script src="./js/achievements.js"></script>

    <!-- Integrated Header JavaScript -->
    <script>
        // Header Variables
        let isHeaderLoggedIn = false;
        let currentHeaderUser = {};
        // Check login status
        function checkHeaderLoginStatus() {
            const userInfo = localStorage.getItem('userInfo');
            const username = localStorage.getItem('username');

            console.log('üîç Checking header login status:', { userInfo: !!userInfo, username });

            // Check if user is logged in by looking for userInfo or username
            isHeaderLoggedIn = !!(userInfo || username);

            let userData = {};
            if (userInfo) {
                try {
                    userData = JSON.parse(userInfo);
                } catch (e) {
                    console.error('Error parsing userInfo:', e);
                }
            }

            currentHeaderUser = {
                username: userData.username || username || '',
                email: userData.email || localStorage.getItem('email') || '',
                fullName: userData.fullName || localStorage.getItem('fullName') || '',
                id: userData.id || localStorage.getItem('userId') || ''
            };

            updateHeaderUI();
        }

        // Update header UI
        function updateHeaderUI() {
            const signInBtn = document.getElementById('signInBtn');
            const userMenu = document.getElementById('userMenu');
            const displayUserName = document.getElementById('displayUserName');
            const userAvatar = document.getElementById('userAvatar');

            console.log('üîÑ Updating header UI - isLoggedIn:', isHeaderLoggedIn, 'username:', currentHeaderUser.username);

            // Lu√¥n x√≥a style inline c≈© ƒë·ªÉ tr√°nh l·ªói hi·ªÉn th·ªã menu user
            if (isHeaderLoggedIn && currentHeaderUser.username) {
                signInBtn.style.display = 'none';
                userMenu.style.display = '';
                userMenu.classList.add('visible');

                // Update username
                displayUserName.textContent = currentHeaderUser.username;

                // Update avatar
                const firstLetter = currentHeaderUser.username.charAt(0).toUpperCase();
                userAvatar.src = `data:image/svg+xml;base64,${btoa(`
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="20" cy="20" r="20" fill="#3498db"/>
                        <text x="20" y="26" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">${firstLetter}</text>
                    </svg>
                `)}`;
            } else {
                signInBtn.style.display = 'flex';
                userMenu.style.display = 'none';
                userMenu.classList.remove('visible');
            }
        }

        // Header functions
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function viewProfile() {
            window.location.href = './user/user.html';
        }

        function viewBookmarks() {
            alert('T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn!');
        }

        function viewHistory() {
            alert('T√≠nh nƒÉng ƒëang ph√°t tri·ªÉn!');
        }

        function logout() {
            if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
                localStorage.clear();
                checkHeaderLoginStatus();
                alert('ƒê√£ ƒëƒÉng xu·∫•t th√†nh c√¥ng!');
                window.location.reload();
            }
        }

        // Search functionality
        function setupHeaderSearch() {
            const searchBtn = document.getElementById('searchBtn');
            const searchInput = document.getElementById('searchInput');
            const searchSuggestions = document.getElementById('searchSuggestions');

            if (searchBtn) {
                searchBtn.addEventListener('click', function () {
                    const query = searchInput.value.trim();
                    if (query) {
                        alert(`T√¨m ki·∫øm: ${query}`);
                        // Implement search logic here
                    }
                });
            }

            if (searchInput) {
                searchInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        searchBtn.click();
                    }
                });
            }
        }

        // Voice search
        function setupVoiceSearch() {
            const voiceBtn = document.getElementById('voiceBtn');
            if (voiceBtn) {
                voiceBtn.addEventListener('click', function () {
                    alert('T√≠nh nƒÉng t√¨m ki·∫øm b·∫±ng gi·ªçng n√≥i ƒëang ph√°t tri·ªÉn!');
                });
            }
        }

        // Initialize header
        function initializeIntegratedHeader() {
            console.log('üéØ Initializing integrated header...');

            // Check login status immediately
            checkHeaderLoginStatus();

            // Setup search
            setupHeaderSearch();
            setupVoiceSearch();

            // Listen for storage changes
            window.addEventListener('storage', function (e) {
                if (e.key === 'username' || e.key === 'token') {
                    console.log('üîÑ Storage changed, updating header...');
                    checkHeaderLoginStatus();
                }
            });

            // Auto-check every 3 seconds
            setInterval(checkHeaderLoginStatus, 3000);

            console.log('‚úÖ Integrated header initialized');
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(initializeIntegratedHeader, 500);
        });

        // Manual refresh function for external use
        window.refreshHeaderStatus = checkHeaderLoginStatus;

        console.log('üéØ Header script loaded');
    </script>

    <!-- Check login status and refresh header -->
    <script>        document.addEventListener('DOMContentLoaded', function () {
            console.log('üè† Index page loaded, checking login status...');

            // Check if user is logged in
            const token = localStorage.getItem('token');
            const username = localStorage.getItem('username');

            console.log('Token:', token ? 'Present' : 'None');
            console.log('Username:', username || 'None');

            // Update header immediately
            updateHeaderLoginStatus();

            if (token && username) {
                console.log('‚úÖ User is logged in:', username);
            } else {
                console.log('‚ùå User not logged in');
            }
        });
    </script>

    <script>
        // Hi·ªÉn th·ªã drop menu khi click v√†o user-info-display
        const userInfoDisplay = document.getElementById('userInfoDisplay');
        const userDropdown = document.getElementById('userDropdown');

        if (userInfoDisplay && userDropdown) {
            userInfoDisplay.addEventListener('click', function (e) {
                e.stopPropagation();
                userDropdown.classList.toggle('active');
            });
            // ·∫®n dropdown khi click ra ngo√†i
            document.addEventListener('click', function (e) {
                if (!userDropdown.contains(e.target) && !userInfoDisplay.contains(e.target)) {
                    userDropdown.classList.remove('active');
                }
            });
        } document.addEventListener('DOMContentLoaded', function () {
            // Update header when page loads
            updateHeaderLoginStatus();

            // Listen for localStorage changes from other tabs
            window.addEventListener('storage', function (e) {
                if (e.key === 'token' || e.key === 'username' || e.key === 'email' || e.key === 'fullName') {
                    updateHeaderLoginStatus();
                }
            });
        });
    </script> <!-- Clean up scripts - use only updateHeaderLoginStatus() -->
    <script>
        // Ensure header is updated when page loads
        window.addEventListener('DOMContentLoaded', function () {
            console.log('== DOMContentLoaded: Calling updateHeaderLoginStatus ==');
            updateHeaderLoginStatus();

            // Log localStorage values for debugging
            console.log('localStorage token:', localStorage.getItem('token'));
            console.log('localStorage username:', localStorage.getItem('username'));

            // Check again after 500ms in case of timing issues
            setTimeout(() => {
                updateHeaderLoginStatus();
            }, 500);
        });

        // Listen for localStorage changes from other tabs
        window.addEventListener('storage', function (e) {
            if (e.key === 'token' || e.key === 'username' || e.key === 'email' || e.key === 'fullName') {
                console.log('== storage event: Calling updateHeaderLoginStatus ==');
                updateHeaderLoginStatus();
            }
        });
    </script>
    <script>
        (function () {
            const bell = document.getElementById('notificationBell');
            const dropdown = document.getElementById('notificationDropdown');
            if (!bell || !dropdown) return;
            // Hi·ªÉn th·ªã khi hover ho·∫∑c click
            let dropdownTimeout;
            function showDropdown() {
                clearTimeout(dropdownTimeout);
                dropdown.classList.add('active');
            }
            function hideDropdown() {
                dropdownTimeout = setTimeout(() => {
                    dropdown.classList.remove('active');
                }, 120);
            }
            bell.addEventListener('mouseenter', showDropdown);
            bell.addEventListener('mouseleave', hideDropdown);
            bell.addEventListener('click', function (e) {
                e.stopPropagation();
                if (dropdown.classList.contains('active')) {
                    dropdown.classList.remove('active');
                } else {
                    showDropdown();
                }
            });
            dropdown.addEventListener('mouseenter', showDropdown);
            dropdown.addEventListener('mouseleave', hideDropdown);
            // ƒê√≥ng khi click ra ngo√†i
            document.addEventListener('click', function (e) {
                if (!bell.contains(e.target) && !dropdown.contains(e.target)) {
                    dropdown.classList.remove('active');
                }
            });
        })();
    </script>
</body>

</html>